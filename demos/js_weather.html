<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weather App</title>
<style>
  body {
    font-family: "Poppins", sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    background: linear-gradient(135deg, #74b9ff, #a29bfe);
    animation: gradientShift 10s ease infinite alternate;
    color: #222;
    margin: 0;
  }
  @keyframes gradientShift {
    0% { background: linear-gradient(135deg, #74b9ff, #a29bfe); }
    100% { background: linear-gradient(135deg, #00cec9, #0984e3); }
  }

  h1 {
    color: white;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
    margin-bottom: 20px;
  }

  input {
    padding: 10px 15px;
    width: 220px;
    border: none;
    border-radius: 8px;
    outline: none;
    font-size: 16px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  }

  button {
    margin-top: 10px;
    padding: 10px 20px;
    border: none;
    background: #0984e3;
    color: white;
    font-size: 16px;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.3s;
  }
  button:hover {
    background: #74b9ff;
  }

  #result {
    margin-top: 25px;
    width: 300px;
    padding: 25px;
    border-radius: 16px;
    background: rgba(255, 255, 255, 0.25);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(10px);
    text-align: center;
    color: #2d3436;
    transition: 0.4s ease;
  }

  #result h3 {
    margin-bottom: 10px;
  }

  .icon {
    font-size: 50px;
    margin-bottom: 10px;
    animation: float 2s ease-in-out infinite;
  }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
  }

  .loading {
    font-size: 18px;
    color: white;
    animation: pulse 1s infinite;
  }
  @keyframes pulse {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 1; }
  }
</style>
</head>
<body>
  <h1>🌦 Weather App</h1>
  <input id="city" placeholder="Enter city name">
  <button onclick="getWeather()">Check</button>
  <div id="result"></div>

<script>
async function getWeather() {
  const city = document.getElementById("city").value.trim();
  const result = document.getElementById("result");

  if (!city) return alert("Please enter a city name!");

  result.innerHTML = `<p class="loading">Loading weather data...</p>`;

  try {
    const geoRes = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${city}`);
    const geoData = await geoRes.json();

    if (!geoData.results || geoData.results.length === 0) {
      result.innerHTML = `<p>❌ City not found!</p>`;
      return;
    }

    const { latitude, longitude, name, country } = geoData.results[0];
    const weatherRes = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true`);
    const weatherData = await weatherRes.json();
    const weather = weatherData.current_weather;

    const icon = getWeatherIcon(weather.weathercode);

    result.innerHTML = `
      <div class="icon">${icon}</div>
      <h3>${name}, ${country}</h3>
      <p><b>Temperature:</b> ${weather.temperature}°C</p>
      <p><b>Wind Speed:</b> ${weather.windspeed} km/h</p>
      <p><small>Updated: ${new Date(weather.time).toLocaleString()}</small></p>
    `;
  } catch (err) {
    result.innerHTML = `<p>Error fetching data 😢</p>`;
    console.error(err);
  }
}

function getWeatherIcon(code) {
  if (code === 0) return "☀️"; // Clear
  if ([1, 2, 3].includes(code)) return "🌤"; // Partly cloudy
  if ([45, 48].includes(code)) return "🌫"; // Fog
  if ([51, 53, 55].includes(code)) return "🌦"; // Drizzle
  if ([61, 63, 65].includes(code)) return "🌧"; // Rain
  if ([71, 73, 75].includes(code)) return "🌨"; // Snow
  if ([95, 96, 99].includes(code)) return "⛈"; // Thunderstorm
  return "🌡"; // Default
}
</script>
</body>
</html>